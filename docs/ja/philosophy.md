---
source-updated-at: '2025-04-16T08:45:06.000Z'
translation-updated-at: '2025-04-30T21:24:47.163Z'
id: philosophy
title: 設計思想
---

# 哲学 (Philosophy)

すべての確立されたプロジェクトには、その開発を導く哲学が必要です。中核となる哲学がなければ、開発は終わりのない意思決定に陥り、結果として弱いAPIが生まれる可能性があります。

このドキュメントでは、TanStack Formの開発と機能セットを推進する中核原則を概説します。

## 統一されたAPIの向上 (Upgrading unified APIs)

APIにはトレードオフが伴います。その結果、各トレードオフのセットを異なるAPIを通じてユーザーに提供したくなるかもしれません。しかし、これにより断片化されたAPIが生まれ、学習や使用が難しくなる可能性があります。

これは学習曲線が高くなることを意味するかもしれませんが、内部でどのAPIを使用すべきか疑問に思う必要がなく、API間を切り替える際の認知的負荷が高くなることもありません。

## フォームには柔軟性が必要 (Forms need flexibility)

TanStack Formは柔軟でカスタマイズ可能に設計されています。多くのフォームが類似したパターンに従うかもしれませんが、特にフォームがアプリケーションのコアコンポーネントである場合、常に例外が存在します。

その結果、TanStack Formは以下のような複数の検証方法をサポートしています:

- **タイミングのカスタマイズ**: ブラー時、変更時、送信時、さらにはマウント時にも検証できます。
- **検証戦略**: 個々のフィールド、フォーム全体、またはフィールドのサブセットに対して検証できます。
- **カスタム検証ロジック**: 独自の検証ロジックを記述するか、[Zod](https://zod.dev/)や[Valibot](https://valibot.dev/)などのライブラリを使用できます。
- **カスタムエラーメッセージ**: バリデータから任意のオブジェクトを返すことで、各フィールドのエラーメッセージをカスタマイズできます。
- **非同期検証**: フィールドを非同期で検証でき、デバウンスやキャンセルなどの一般的なユーティリティが自動的に処理されます。

## コントロールされた入力はクール (Controlled is Cool)

コントロールされた入力と非コントロールされた入力がホットトピックとなっている世界において、TanStack Formは確固としてコントロールされた側に立っています。

これには多くの利点があります:

- **予測可能**: フォームの状態をいつでも予測できます。
- **テストが容易**: 値を渡して出力をアサートすることで、簡単にフォームをテストできます。
- **非DOMサポート**: React Native、Three.jsフレームワークアダプター、または他のフレームワークレンダラーでTanStack Formを使用できます。
- **強化された条件ロジック**: フォームの状態に基づいてフィールドを簡単に条件付きで表示/非表示にできます。
- **デバッグ**: フォームの状態をコンソールに簡単にログ出力して問題をデバッグできます。

## ジェネリクスは厄介 (Generics are grim)

TanStack Formを活用する際にジェネリクスを渡したり内部タイプを使用したりする必要はありません。これは、ライブラリが実行時のデフォルトからすべてを推論するように設計されているためです。

十分に正確なTanStack Formコードを書く場合、実行時値の型キャストを除いて、JavaScriptの使用とTypeScriptの使用を区別できないはずです。

以下のようにする代わりに:

```typescript
useForm<MyForm>()
```

以下のようにすべきです:

```typescript
interface Person {
  name: string
  age: number
}

const defaultPerson: Person = { name: 'Bill Luo', age: 24 }

useForm({
  defaultValues: defaultPerson,
})
```

## ライブラリは解放する (Libraries are liberating)

TanStack Formの主な目的の1つは、独自のコンポーネントシステムやデザインシステムに組み込むことです。

これをサポートするために、独自のコンポーネントやカスタマイズされたフックを簡単に構築できるようにする多くのユーティリティを提供しています:

```typescript
// フォーム用に事前にバインドされたコンポーネントと共に独自のライブラリからエクスポート
export const { useAppForm, withForm } = createFormHook(/* options */)
```

これを行わないと、アプリに大幅に多くのボイラープレートを追加し、フォームの一貫性とユーザーフレンドリーさを損なうことになります。
