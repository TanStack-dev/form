---
source-updated-at: '2025-03-04T11:48:41.000Z'
translation-updated-at: '2025-04-12T04:08:37.807Z'
id: philosophy
title: 设计理念
---

每个成熟的项目都应具备指导其开发的核心哲学。缺乏核心理念的开发会陷入无休止的决策困境，最终导致 API 设计薄弱。

本文档阐述了驱动 TanStack Form 开发与功能设计的核心原则。

## 统一升级的 API 设计

API 设计必然伴随权衡取舍。虽然为每种取舍方案提供独立 API 很诱人，但这会导致 API 碎片化，增加学习与使用难度。

尽管这意味着更高的学习曲线，但您无需纠结内部该选用哪个 API，也避免了切换不同 API 时的认知负担。

## 表单需要灵活性

TanStack Form 专为灵活定制而设计。虽然多数表单遵循相似模式，但总有例外——尤其是当表单成为应用核心组件时。

因此，TanStack Form 支持多种验证方式：

- **时机定制**：可在失焦、变更、提交甚至挂载时触发验证
- **验证策略**：支持字段级、表单级或字段子集的验证
- **自定义验证逻辑**：可编写自有逻辑或集成 [Zod](https://zod.dev/) / [Valibot](https://valibot.dev/) 等库
- **自定义错误信息**：通过验证器返回任意对象来定制字段错误提示
- **异步验证**：支持异步验证字段，并内置防抖与取消等常用工具

## 受控才是王道

在受控与非受控组件的争论中，TanStack Form 坚定选择受控方案。

这带来诸多优势：

- **可预测性**：随时掌握表单状态
- **易于测试**：通过传入值并断言输出结果来轻松测试
- **非 DOM 支持**：兼容 React Native、Three.js 框架适配器等任意渲染器
- **增强条件逻辑**：可根据表单状态动态显示/隐藏字段
- **调试便捷**：轻松输出表单状态至控制台进行调试

## 泛型是种负担

使用 TanStack Form 时，您永远不需要手动传递泛型或使用内部类型。因为我们通过运行时默认值实现了全自动类型推断。

编写正确的 TanStack Form 代码时，除了对运行时值的类型断言外，您应无法区分 JavaScript 与 TypeScript 的用法差异。

应避免：

```typescript
useForm<MyForm>()
```

而应采用：

```typescript
useForm({
  defaultValues: {
    name: 'Bill Luo',
    age: 24,
  } as MyForm,
})
```

## 封装赋予自由

TanStack Form 的主要目标之一，是让您能将其封装进自有组件系统或设计系统中。

为此我们提供了诸多工具，助您轻松构建自定义组件与钩子：

```typescript
// 从自有库导出已绑定表单组件的预配置钩子
export const { useAppForm, withForm } = createFormHook(/* 配置项 */)
```

若不这样做，您的应用将增加大量样板代码，导致表单不一致且降低用户体验。
